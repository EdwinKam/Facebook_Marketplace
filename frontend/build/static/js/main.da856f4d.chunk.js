(this["webpackJsonpcse183-assignment8-frontend"]=this["webpackJsonpcse183-assignment8-frontend"]||[]).push([[0],{169:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),c=n(48),o=n.n(c),r=n(19),l=n(9),s=n(246),d=n(233),j=n(220),u=n(239),b=n(250),h=n(249),p=n(1),x=Object(j.a)({regButton:{background:"linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)",border:0,borderRadius:3,color:"white",marginTop:"5%"},inputField:{outline:"none",border:"none",marginBottom:"5%",width:"100%"},mobileLoginForm:{textAlign:"center",position:"relative",left:"50%",transform:"translate(-50%, 20%)",backgroundColor:"white"},form:{width:"100%"},error:{color:"red"}});var g=function(){var e=i.a.useState({email:"",password:""}),t=Object(l.a)(e,2),n=t[0],a=t[1],c=Object(r.f)(),o=function(e){var t=e.target,i=t.value,c=t.name,o=n;o[c]=i,a(o)},j=x();return Object(p.jsx)("div",{children:Object(p.jsx)(s.a,{xs:12,className:j.mobileLoginForm,children:Object(p.jsxs)("form",{className:j.form,children:[Object(p.jsx)("h2",{children:"facebook"}),Object(p.jsx)(d.a,{type:"email",name:"email",inputProps:{"data-testid":"email-input"},className:j.inputField,onChange:o,placeholder:"Username or email",variant:"outlined"}),Object(p.jsx)(d.a,{type:"password",name:"password",inputProps:{"data-testid":"password-input"},className:j.inputField,onChange:o,placeholder:"Password",variant:"outlined"}),Object(p.jsx)(u.a,{variant:"contained",color:"primary",onClick:function(e){e.preventDefault(),fetch("/authenticate",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then((function(e){if(!e.ok)throw e;return e.json()})).then((function(e){localStorage.setItem("user",JSON.stringify(e)),console.log(e),c.push("/")})).catch((function(e){console.log(e),alert("Error logging in, please try again")}))},"data-testid":"log-in","aria-label":"log-in",children:"Log In"}),Object(p.jsx)(h.a,{variant:"caption",display:"block",gutterBottom:!0,children:"Forgot password?"}),Object(p.jsx)(b.a,{children:"or"}),Object(p.jsx)(u.a,{variant:"contained",color:"success",onClick:function(e){c.push("/register")},"data-testid":"create-account",children:"Create an account"})]})})})},O=n(14),m=n(247),f=n(232),v=n(16),y=n(84),C=n.n(y),w=n(240),S=Object(j.a)({regButton:{background:"linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)",border:0,borderRadius:3,color:"white",marginTop:"5%"},inputField:{outline:"none",border:"none",marginBottom:"5%",width:"100%"},mobileLoginForm:{textAlign:"center",position:"relative",left:"50%",transform:"translate(-50%, 20%)",backgroundColor:"white"},dropdown:{textAlign:"left"},form:{width:"100%"},error:{color:"red"}});var k=function(){var e=i.a.useState([]),t=Object(l.a)(e,2),n=t[0],a=t[1],c=i.a.useState("electronics"),o=Object(l.a)(c,2),j=o[0],b=o[1],h=i.a.useState("new"),x=Object(l.a)(h,2),g=x[0],y=x[1],k=i.a.useState("local pickup"),N=Object(l.a)(k,2),P=N[0],F=N[1],B=i.a.useState(""),T=Object(l.a)(B,2),I=T[0],D=T[1],E=i.a.useState("$"),L=Object(l.a)(E,2),A=L[0],J=L[1],z=i.a.useState(""),W=Object(l.a)(z,2),R=W[0],U=W[1],G=i.a.useState(!1),M=Object(l.a)(G,2),V=M[0],$=M[1],q=i.a.useState([""]),Y=Object(l.a)(q,2),H=Y[0],K=Y[1],Q=Object(r.f)();i.a.useEffect((function(){fetch("v0/category").then((function(e){return e.json()})).then((function(e){console.log(e),a(e)})).catch()}),[]);var X=S();return Object(p.jsxs)("div",{children:[localStorage.getItem("user")?null:Object(p.jsx)(r.a,{to:"login"}),Object(p.jsx)(s.a,{component:"form",sx:{display:{xs:"12"},"& > :not(style)":{m:1,height:"0ch"}},className:X.mobileLoginForm,children:Object(p.jsxs)("div",{className:X.form,children:[Object(p.jsxs)(w.a,{container:!0,direction:"row",children:[Object(p.jsx)(u.a,{component:v.b,to:"listings",align:"left",variant:"Go home",children:Object(p.jsx)(C.a,{})}),Object(p.jsx)("h2",{align:"center",children:"Add new listing"})]}),Object(p.jsx)(s.a,{children:Object(p.jsx)(d.a,{name:"title",inputProps:{"data-testid":"productName-input"},error:!I&&V,className:X.inputField,placeholder:"Title of the listing",label:"Title of the listing",variant:"outlined",value:I,onChange:function(e){return D(e.target.value)}})}),Object(p.jsx)("hr",{}),Object(p.jsx)(s.a,{children:Object(p.jsx)(d.a,{name:"price",inputProps:{"data-testid":"price-input"},error:"$"===A&&V,className:X.inputField,placeholder:"Price",label:"Price",variant:"outlined",value:A,onChange:function(e){0===e.target.value.length?J("$"):J(e.target.value)}})}),Object(p.jsx)("hr",{}),Object(p.jsx)(s.a,{children:Object(p.jsx)(m.a,{fullWidth:!0,className:X.dropdown,children:Object(p.jsx)(f.a,{labelId:"select-cat","data-testId":"category-input",native:!0,error:!j&&V,id:"select-cat",value:j,onChange:function(e){var t=e.target.value;console.log(t),b(t)},defaultValue:"electronics",children:n.map((function(e,t){return Object(p.jsx)("option",{value:e.name,inputProps:{"data-testid":"cat-"+e.name},children:e.name},"cat-"+e.name)}))})})}),Object(p.jsx)("hr",{}),Object(p.jsx)(s.a,{children:Object(p.jsx)(m.a,{fullWidth:!0,className:X.dropdown,children:Object(p.jsxs)(f.a,{labelId:"select-label-condition",id:"select-condition",native:!0,value:g,"data-testid":"condition-input",onChange:function(e){y(e.target.value)},defaultValue:"new",children:[Object(p.jsx)("option",{value:"new",children:"New"},"con-new"),Object(p.jsx)("option",{value:"used",children:"Used"},"con-used")]})})}),Object(p.jsx)("hr",{}),Object(p.jsx)(m.a,{fullWidth:!0,className:X.dropdown,children:Object(p.jsxs)(f.a,{labelId:"select-label-Delivery",native:!0,id:"select-Delivery",value:P,onChange:function(e){F(e.target.value)},"data-testid":"delivery-input",defaultValue:"local pickup",children:[Object(p.jsx)("option",{value:"local pickup",children:"Local Pickup"},"del-pickup"),Object(p.jsx)("option",{value:"shipping",children:"Shipping"},"del-shipping")]})}),Object(p.jsx)("hr",{}),Object(p.jsx)(d.a,{name:"description",className:X.inputField,placeholder:"Description of the product",inputProps:{"data-testid":"description-input"},variant:"outlined",value:R,onChange:function(e){return U(e.target.value)}}),Object(p.jsx)("hr",{}),H.map((function(e,t){return Object(p.jsx)(d.a,{name:"pic",error:V&&!H.filter((function(e){return e.length})).length,className:X.inputField,inputProps:{"data-testid":"pic-input"+t},placeholder:"Picture Link",label:"Picture Link",variant:"outlined",value:e,onChange:function(e){return function(e,t){var n=H;n[t]=e,K(Object(O.a)(n))}(e.target.value,t)},helperText:"required"},"pic-"+t)})),Object(p.jsxs)(s.a,{sx:{"& > :not(style)":{m:1,height:"5ch"}},children:[Object(p.jsx)(u.a,{variant:"contained",color:"primary",onClick:function(){return function(){var e=H;e.push(""),K(Object(O.a)(e))}()},children:"add Pics"}),Object(p.jsx)(u.a,{variant:"contained",disabled:1===H.length,"aria-label":"remove pic",color:"primary",onClick:function(){return function(){var e=H;e.pop(),K(Object(O.a)(e))}()},children:"remove Pic"}),Object(p.jsx)(u.a,{variant:"contained",color:"primary",onClick:function(e){if(console.log("clicked"),e.preventDefault(),!I||!H.filter((function(e){return e.length})).length||"$"===A||""===g)return console.log(!I||!H.filter((function(e){return e.length})).length),void $(!0);var t=localStorage.getItem("user");console.log(t);var n=JSON.parse(t).accessToken;console.log(JSON.parse(t).id);var a={user:JSON.parse(t).id,category:j,listing:{name:I,price:A,pic:H.filter((function(e){return e.length})),condition:g,delivery:P,description:R,responses:[]}};console.log(JSON.stringify(a)),fetch("/v0/listings",{method:"POST",body:JSON.stringify(a),headers:{Authorization:"Bearer ".concat(n),"Content-type":"application/json; charset=UTF-8"}}).then((function(e){Q.push("/profile")})).then().catch()},children:"Sell it!"})]})]})})]})},N=n(107),P=n.n(N),F=n(121),B=n(61),T=n(230),I=n(241),D=n(127),E=n.n(D),L=n(248),A=n(236),J=n(257),z=n(258),W=n(128),R=n.n(W),U=n(4),G=n(253),M=n(89),V=n.n(M),$=n(254),q=n(256),Y=n(251),H=n(252),K=n(255),Q=n(244),X=n(228),Z=Object(j.a)({appBar:{zIndex:1,background:"white",color:"blue"},button:{background:"green",zIndex:11},grow:{flexGrow:1}});var _=function(){var e=i.a.useState({email:"",password:""}),t=Object(l.a)(e,2),n=t[0],a=t[1],c=Object(r.f)(),o=function(e){var t=e.target,i=t.value,c=t.name,o=n;o[c]=i,a(o)},j=function(e){e.preventDefault(),fetch("/authenticate",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){localStorage.setItem("user",JSON.stringify(e)),c.push("/")})).catch((function(e){alert("Error logging in, please try again")}))},b=function(e){localStorage.clear(),c.push("/")},h=function(){return Object(p.jsx)(u.a,{variant:"contained","aria-label":"login",color:"primary",component:v.b,sx:{display:{xs:"block",md:"none"}},to:"login",children:"Log In"})},x=function(){return Object(p.jsx)(u.a,{variant:"contained",color:"primary",onClick:b,sx:{display:{xs:"block",md:"none"}},children:"Log Out"})},g=function(){return Object(p.jsx)(u.a,{variant:"contained","aria-label":"login",color:"primary",onClick:j,children:"Log In"})},O=function(){return Object(p.jsx)(u.a,{variant:"contained",color:"primary",onClick:b,children:"Log Out"})},m=Z();return Object(p.jsx)(Q.a,{position:"fixed",className:m.appBar,children:Object(p.jsxs)(X.a,{variant:"dense",children:[Object(p.jsx)("p",{"aria-label":"logo",children:"Facebook"}),Object(p.jsx)("div",{className:m.grow}),Object(p.jsxs)(s.a,{component:"form",sx:{display:{xs:"none",md:"block"},"& > :not(style)":{m:.5,width:"20ch",height:"6ch"}},noValidate:!0,autoComplete:"off",children:[localStorage.getItem("user")?null:Object(p.jsx)(d.a,{type:"email",name:"email",className:m.inputField,onChange:o,placeholder:"Username or email",variant:"outlined"}),localStorage.getItem("user")?null:Object(p.jsx)(d.a,{type:"password",name:"password",className:m.inputField,onChange:o,placeholder:"Password",variant:"outlined"}),localStorage.getItem("user")?Object(p.jsx)(O,{}):Object(p.jsx)(g,{})]}),localStorage.getItem("user")?Object(p.jsx)(x,{}):Object(p.jsx)(h,{})]})})},ee=n(243),te=n(122),ne=n.n(te),ae=n(264),ie=n(261),ce=n(235),oe=n(245),re=n(263),le=n(87),se=n.n(le),de=n(86),je=n.n(de),ue=n(262);function be(e){var t=a.useState(!1),n=Object(l.a)(t,2),i=n[0],c=n[1];return Object(p.jsxs)(a.Fragment,{children:[Object(p.jsxs)(Y.a,{sx:{"& > *":{borderBottom:"unset"}},onClick:function(){return c(!i)},children:[Object(p.jsx)(H.a,{children:Object(p.jsx)(G.a,{"aria-label":"expand row",size:"small",children:i?Object(p.jsx)(je.a,{}):Object(p.jsx)(se.a,{})})}),Object(p.jsx)(H.a,{children:" Condition "})]}),Object(p.jsxs)(Y.a,{children:[Object(p.jsx)(H.a,{style:{paddingBottom:0,paddingTop:0}}),Object(p.jsx)(H.a,{style:{paddingBottom:0,paddingTop:0},children:Object(p.jsx)(ue.a,{in:i,timeout:"auto",unmountOnExit:!0,children:Object(p.jsx)(m.a,{component:"fieldset",children:Object(p.jsxs)(oe.a,{"aria-label":"Condition",value:e.condition,name:"radio-buttons-group",children:[Object(p.jsx)(re.a,{value:"all",control:Object(p.jsx)(ce.a,{}),label:"All",onClick:function(t){e.handleCondition(t),c(!i),e.handlePopover&&e.handlePopover()}}),Object(p.jsx)(re.a,{value:"new",control:Object(p.jsx)(ce.a,{}),label:"New",onClick:function(t){e.handleCondition(t),c(!i),e.handlePopover&&e.handlePopover()}}),Object(p.jsx)(re.a,{value:"used",control:Object(p.jsx)(ce.a,{}),label:"Used",onClick:function(t){e.handleCondition(t),c(!i),e.handlePopover&&e.handlePopover()}})]})})})})]})]})}function he(e){var t=a.useState(!1),n=Object(l.a)(t,2),i=n[0],c=n[1];return Object(p.jsxs)(a.Fragment,{children:[Object(p.jsxs)(Y.a,{sx:{"& > *":{borderBottom:"unset"}},onClick:function(){return c(!i)},children:[Object(p.jsx)(H.a,{children:Object(p.jsx)(G.a,{"aria-label":"expand row",size:"small",children:i?Object(p.jsx)(je.a,{}):Object(p.jsx)(se.a,{})})}),Object(p.jsx)(H.a,{children:" Delivery "})]}),Object(p.jsxs)(Y.a,{children:[Object(p.jsx)(H.a,{style:{paddingBottom:0,paddingTop:0}}),Object(p.jsx)(H.a,{style:{paddingBottom:0,paddingTop:0},children:Object(p.jsx)(ue.a,{in:i,timeout:"auto",unmountOnExit:!0,children:Object(p.jsx)(m.a,{component:"fieldset",children:Object(p.jsxs)(oe.a,{"aria-label":"Delivery",value:e.delivery,name:"radio-buttons-group",children:[Object(p.jsx)(re.a,{value:"all",control:Object(p.jsx)(ce.a,{}),label:"All",onClick:function(t){e.handleDelivery(t),c(!i),e.handlePopover&&e.handlePopover()}}),Object(p.jsx)(re.a,{value:"shipping",control:Object(p.jsx)(ce.a,{}),label:"Shipping",onClick:function(t){e.handleDelivery(t),c(!i),e.handlePopover&&e.handlePopover()}}),Object(p.jsx)(re.a,{value:"local pickup",control:Object(p.jsx)(ce.a,{}),label:"Local Pickup",onClick:function(t){e.handleDelivery(t),c(!i),e.handlePopover&&e.handlePopover()}})]})})})})]})]})}function pe(e){var t=a.useState(null),n=Object(l.a)(t,2),i=n[0],c=n[1],o=function(){c(null)},r=Boolean(i),s=r?"simple-popover":void 0;return Object(p.jsxs)("div",{children:[Object(p.jsxs)(u.a,{"data-testid":"mobile filter pop","aria-describedby":s,variant:"contained",onClick:function(e){c(e.currentTarget)},children:[Object(p.jsx)(ne.a,{}),"FILTERS"]}),Object(p.jsx)(ee.a,{id:s,open:r,anchorEl:i,onClose:o,anchorOrigin:{vertical:"bottom",horizontal:"left"},children:Object(p.jsx)(ae.a,{component:ie.a,children:Object(p.jsxs)($.a,{"aria-label":"collapsible table",children:[Object(p.jsx)(K.a,{children:Object(p.jsxs)(Y.a,{children:[Object(p.jsx)(H.a,{}),Object(p.jsx)(H.a,{align:"right",children:Object(p.jsx)(V.a,{"data-testid":"mobile filter pop close",onClick:o})})]})}),Object(p.jsxs)(q.a,{children:[Object(p.jsx)(be,{handleCondition:e.handleCondition,condition:e.condition,handlePopover:o}),Object(p.jsx)(he,{handleDelivery:e.handleDelivery,delivery:e.delivery,handlePopover:o})]})]})})})]})}function xe(e){return Object(p.jsx)(ae.a,{component:ie.a,children:Object(p.jsx)($.a,{"aria-label":"collapsible table",children:Object(p.jsxs)(q.a,{children:[Object(p.jsx)(be,{handleCondition:e.handleCondition,condition:e.condition}),Object(p.jsx)(he,{handleDelivery:e.handleDelivery,delivery:e.delivery})]})})})}var ge=n(123),Oe=n.n(ge),me=n(265);function fe(e){return Object(p.jsxs)(s.a,{sx:{"& > :not(style)":{m:.75}},children:[Object(p.jsx)(me.a,{"data-testid":"profile fab",size:"small",variant:"extended","aria-label":"user",component:v.b,to:"profile",children:Object(p.jsx)(Oe.a,{})},"fabUser"),Object(p.jsx)(me.a,{size:"small",variant:"extended","aria-label":"sell",component:v.b,to:"sell",children:Object(p.jsx)("b",{children:"sell"})},"fabSell"),Object(p.jsx)(me.a,{"data-testid":"all categories fab",size:"small",variant:"extended","aria-label":"all categories",onClick:e.handleDrawerToggle,children:Object(p.jsx)("b",{children:"All Categories"})},"fabAllCats")]})}function ve(e){var t=a.useState(""),n=Object(l.a)(t,2),i=n[0],c=n[1];return Object(p.jsx)(d.a,{inputProps:{"data-testid":"search-input-"+e.testIdprops},placeholder:"Search",variant:"outlined",value:i,onChange:function(t){return n=t.target.value,c(n),void e.setSearchWord(n);var n}})}var ye=n(229),Ce=n(237),we=n(266);function Se(e){var t=[Object(p.jsx)(we.a,{"data-testid":"all breadcrumbs",underline:"hover",color:"inherit",href:"/",onClick:e.handleBread,children:"All"},"breadcrumbs marketplace")];return Object(p.jsxs)(Ce.a,{separator:"\u203a","aria-label":"breadcrumb",children:[t,e.bread.map((function(t){return Object(p.jsx)(we.a,{"data-testid":"subcat breadcrumb",underline:"hover",color:"inherit",onClick:e.handleBread,children:t},"breadcrumbs ".concat(t))}))]})}function ke(e){return Object(p.jsxs)(s.a,{sx:{"& > :not(style)":{m:.75}},children:[Object(p.jsxs)(s.a,{sx:{"& > :not(style)":{m:.75}},children:[Object(p.jsx)(Se,{handleBread:e.handleBread,bread:e.bread}),Object(p.jsx)(s.a,{sx:{display:{xs:"block",md:"none"},"& > :not(style)":{m:.75}},children:Object(p.jsx)(u.a,{variant:"outlined",onClick:e.handleDrawerToggle,children:e.bread[0]})})]}),Object(p.jsx)(ye.a,{direction:"row",spacing:2,children:e.subCats.map((function(t){return Object(p.jsx)(me.a,{"data-testid":"subcat fab ".concat(t),size:"small",variant:"extended","aria-label":"all categories",onClick:e.handleSubCat,children:Object(p.jsx)("b",{children:t})},"fab ".concat(t))}))})]})}var Ne=n(124),Pe=n.n(Ne),Fe=n(125),Be=n.n(Fe),Te=n(126),Ie=n.n(Te),De=Object(U.a)(ie.a)((function(e){var t=e.theme;return Object(B.a)(Object(B.a)({},t.typography.body2),{},{padding:t.spacing(1),textAlign:"center",color:t.palette.text.secondary})}));var Ee=function(e){var t=i.a.useState(null),n=Object(l.a)(t,2),a=n[0],c=n[1],o=i.a.useState(0),r=Object(l.a)(o,2),j=r[0],b=r[1],x=i.a.useState(""),g=Object(l.a)(x,2),m=g[0],f=g[1],y=i.a.useState([]),C=Object(l.a)(y,2),S=C[0],k=C[1],N="string"!==typeof e.listings?e.listings:[];i.a.useEffect((function(){c(null),b(0)}),[e]),i.a.useEffect((function(){if(null!==a){function t(){var t="http://localhost:3010/v0/comments/".concat(e.listings[a].id);console.log(t),fetch(t).then((function(e){return console.log(e.status),e.json()})).then((function(e){console.log(e),k(Object(O.a)(e)),console.log(t)})).catch()}t()}}),[a,e.listings]);var P=function(t){console.log("fsfs/n/n/n/n/n/n/nsubmit"),t.preventDefault();var n,i=e.listings[a].id,c=localStorage.getItem("user");console.log(c);try{n=JSON.parse(c).name}catch(r){}var o="/v0/comments/".concat(i,"?user=").concat(n)+"&comment=".concat(m);console.log(o),fetch(o,{method:"PUT",headers:{"Content-type":"application/json; charset=UTF-8"}}).then((function(t){console.log(t.status+"get from onsubmit"),function(){console.log("called get comment");var t="http://localhost:3010/v0/comments/".concat(e.listings[a].id);fetch(t).then((function(e){return console.log(e),e.json()})).then((function(e){console.log(e),k(Object(O.a)(e))})).catch()}()})).then().catch(),f("")};return Object(p.jsx)("div",{children:Object(p.jsx)(s.a,{sx:{flexGrow:1},children:N.length?null===a?Object(p.jsx)(w.a,{container:!0,spacing:2,children:N.map((function(e,t){return Object(p.jsx)(w.a,{item:!0,xs:6,children:Object(p.jsxs)(De,{onClick:function(){c(t)},children:[Object(p.jsx)("img",{src:e.listing.pic[0],alt:"url expired",height:"200"},"listing image ".concat(e.listing.id)),Object(p.jsx)(h.a,{children:e.listing.price},"listing price ".concat(e.listing.id)),Object(p.jsx)(h.a,{id:"listing name ".concat(e.listing.name),children:e.listing.name},"listing name ".concat(e.listing.id))]},"listing ".concat(e.listing.id))},"listing grid ".concat(t))}))},"listing grid"):function(e,t){var n=e[t];return Object(p.jsxs)(s.a,{children:[Object(p.jsxs)(s.a,{sx:{height:"100%",width:"100%",margin:0,padding:1,border:"3px solid grey"},children:[Object(p.jsxs)(ye.a,{direction:"row",spacing:2,sx:{padding:1},children:[Object(p.jsx)(u.a,{name:"close",variant:"contained",sx:{width:"10%"},onClick:function(){return c(null),void b(0)},children:Object(p.jsx)(Pe.a,{})}),Object(p.jsx)(De,{sx:{width:"90%",fontWeight:"bold",textTransform:"uppercase",border:"1px solid grey"},children:n.listing.name},"product name ".concat(n.listing.id))]}),Object(p.jsxs)(s.a,{sx:{display:"flex",flexDirection:"column",flexWrap:"wrap"},children:[Object(p.jsxs)(ye.a,{direction:"row",spacing:2,sx:{padding:1},children:[1!==n.listing.pic.length?Object(p.jsx)(u.a,{variant:"outlined",sx:{width:"5%",height:"10%"},onClick:function(){return F(n.listing.pic,-1)},children:Object(p.jsx)(Be.a,{})}):null,Object(p.jsx)("img",{border:"1px solid grey",src:n.listing.pic[j],alt:"url expired",width:"45%"}),1!==n.listing.pic.length?Object(p.jsx)(u.a,{variant:"outlined",sx:{width:"5%",height:"10%"},onClick:function(){return F(n.listing.pic,1)},children:Object(p.jsx)(Ie.a,{})}):null]}),Object(p.jsxs)(De,{sx:{textAlign:"left",border:"1px solid grey",m:.25},children:[Object(p.jsx)("b",{children:"PRICE:"})," ",n.listing.price]},"product price ".concat(n.listing.id)),Object(p.jsxs)(De,{sx:{textAlign:"left",border:"1px solid grey",m:.25},children:[Object(p.jsx)("b",{children:"DESCRIPTION:"})," ",n.listing.description]},"product description ".concat(n.listing.id))]})]}),Object(p.jsxs)(s.a,{sx:{height:"100%",width:"100%",margin:0,padding:1,border:"3px solid grey"},children:[Object(p.jsxs)(ye.a,{direction:"row",spacing:2,children:[Object(p.jsx)(d.a,{sx:{width:"90%"},placeholder:"have something to say?",inputProps:{"data-testid":"comment-input"},variant:"outlined",value:m,onChange:function(e){return f(e.target.value)}}),localStorage.getItem("user")?Object(p.jsx)(u.a,{"data-testid":"comment-button",sx:{width:"10%"},variant:"contained",color:"primary",onClick:P,children:"Comment"}):Object(p.jsx)(u.a,{"data-testid":"comment-button-nologin",sx:{width:"10%"},variant:"contained",color:"primary",component:v.b,to:"login",children:"Comment"})]}),Object(p.jsx)("div",{children:S.map((function(e,t){return Object(p.jsx)(De,{sx:{textAlign:"left"},children:Object(p.jsxs)("p",{children:[e.user,":",e.comment]})},"comment ".concat(t))}))})]})]})}(N,a):null})});function F(e,t){var n=(j+t)%e.length;return n<0&&(n=e.length+n),b(n),e[n]}},Le=240,Ae=Object(U.a)("div")((function(e){var t=e.theme;return Object(B.a)(Object(B.a)({display:"flex",alignItems:"center",padding:t.spacing(0,1)},t.mixins.toolbar),{},{justifyContent:"flex-end"})}));var Je=function(e){var t=a.useState(!1),n=Object(l.a)(t,2),i=n[0],c=n[1],o=a.useState("all"),r=Object(l.a)(o,2),d=r[0],j=r[1],h=a.useState("all"),x=Object(l.a)(h,2),g=x[0],m=x[1],f=a.useState("all"),y=Object(l.a)(f,2),C=y[0],w=y[1],S=a.useState([]),k=Object(l.a)(S,2),N=k[0],B=k[1],D=a.useState([]),W=Object(l.a)(D,2),U=W[0],M=W[1],Q=a.useState([]),X=Object(l.a)(Q,2),Z=X[0],ee=X[1],te=a.useState(""),ne=Object(l.a)(te,2),ae=ne[0],ie=ne[1];a.useEffect((function(){var e=function(){var e=Object(F.a)(P.a.mark((function e(){var t,n,a;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/v0/category");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,"all"===C?M([]):(console.log(n),a=n.filter((function(e){return e.name===C})),console.log(a),console.log(C),M(a[0].subCategory));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();!function(e,t,n){var a="/v0/listings?category=".concat(e)+"&condition=".concat(t,"&delivery=").concat(n);ae.length>0&&(a+="&productName=".concat(ae),console.log("typed something")),console.log(a),fetch(a).then((function(e){return e.json()})).then((function(e){B(e)}))}(C,d,g),e()}),[C,d,g,ae]);var ce=function(e){e.preventDefault();var t=e.target.textContent.toLowerCase();w(t),"all"===t?ee([]):t!==C&&(console.log(C),Z.splice(Z.indexOf(t)+1))},oe=function(e){var t=e.target.textContent.toLowerCase();w(t),ee([].concat(Object(O.a)(Z),[t]))},re=function(e){var t=e.target.value;j(t)},le=function(e){var t=e.target.value;m(t)},se=function(){c(!i)},de=Object(p.jsxs)("div",{children:[Object(p.jsx)(b.a,{}),Object(p.jsx)(L.a,{children:["Electronics","Apparel"].map((function(e,t){return Object(p.jsxs)(A.a,{"data-testid":"categories button",button:!0,onClick:function(e){se();var t=e.target.textContent.toLowerCase();w(t),t!==C&&ee([t])},children:[Object(p.jsx)(J.a,{children:t%2===0?Object(p.jsx)(E.a,{}):Object(p.jsx)(R.a,{})}),Object(p.jsx)(z.a,{primary:e,"aria-label":"cat-main-"+e,role:"button"})]},e)}))}),Object(p.jsx)(b.a,{})]});return Object(p.jsxs)(s.a,{sx:{display:"flex"},children:[Object(p.jsx)(T.a,{}),Object(p.jsxs)(s.a,{component:"nav",sx:{width:{md:Le},flexShrink:{md:0}},"aria-label":"categories-drawer",children:[Object(p.jsxs)(I.a,{container:undefined,variant:"temporary",open:i,onClose:se,ModalProps:{keepMounted:!0},sx:{display:{xs:"block",md:"none"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:Le}},children:[Object(p.jsx)(Ae,{children:Object(p.jsx)(G.a,{"data-testid":"mobile drawer close",onClick:se,children:Object(p.jsx)(V.a,{})})}),de]}),Object(p.jsx)(_,{}),Object(p.jsxs)(I.a,{variant:"permanent",sx:{display:{xs:"none",md:"block"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:Le}},open:!0,children:[Object(p.jsx)(Ae,{}),Object(p.jsx)(u.a,{component:v.b,to:"sell",variant:"outlined",children:"+ Create new listing"}),Object(p.jsx)(ve,{"data-testid":"desktop search-input",listings:N,setSearchWord:ie,testIdprops:"desktop"}),de,Object(p.jsxs)($.a,{"aria-label":"filter table",children:[Object(p.jsx)(K.a,{children:Object(p.jsx)(Y.a,{children:Object(p.jsx)(H.a,{children:"FILTERS"})})}),Object(p.jsx)(q.a,{children:Object(p.jsx)(Y.a,{children:Object(p.jsx)(H.a,{children:Object(p.jsx)(xe,{handleCondition:re,condition:d,handleDelivery:le,delivery:g})})})})]}),Object(p.jsx)(_,{})]})]}),Object(p.jsxs)(s.a,{component:"main",sx:{flexGrow:1,p:3,width:{md:"calc(100% - ".concat(Le,"px)")}},children:[Object(p.jsx)(Ae,{}),Object(p.jsx)("div",{children:Object(p.jsxs)(s.a,{sx:{"& > :not(style)":{m:.75},display:{xs:"block",md:"none"}},children:["all"===C?Object(p.jsx)(fe,{handleDrawerToggle:se}):Object(p.jsx)(ke,{"data-testid":"subcatfab",subCats:U,handleSubCat:oe,handleBread:ce,bread:Z,handleDrawerToggle:se}),Object(p.jsx)(ve,{"data-testid":"desktop search",listings:N,setSearchWord:ie}),Object(p.jsx)("hr",{}),Object(p.jsx)(pe,{handleCondition:re,condition:d,handleDelivery:le,delivery:g})]})}),Object(p.jsx)(s.a,{sx:{"& > :not(style)":{m:.75},display:{xs:"none",md:"block"}},children:Object(p.jsx)(ke,{"data-testid":"subcatfab",category:C,subCats:U,handleSubCat:oe,handleBread:ce,bread:Z})}),Object(p.jsx)(Ee,{listings:N})]})]})},ze=Object(j.a)({regButton:{background:"linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)",border:0,borderRadius:3,color:"white",marginTop:"5%"},inputField:{outline:"none",border:"none",marginBottom:"5%",width:"100%"},mobileLoginForm:{textAlign:"center",position:"relative",left:"50%",transform:"translate(-50%, 20%)",backgroundColor:"white"},form:{width:"100%"},error:{color:"red"}});var We=function(){var e=i.a.useState(""),t=Object(l.a)(e,2),n=t[0],a=t[1],c=i.a.useState(""),o=Object(l.a)(c,2),j=o[0],b=o[1],x=i.a.useState(""),g=Object(l.a)(x,2),O=g[0],m=g[1],f=i.a.useState(""),y=Object(l.a)(f,2),C=y[0],w=y[1],S=Object(r.f)(),k=ze();return Object(p.jsx)("div",{children:Object(p.jsx)(s.a,{xs:12,className:k.mobileLoginForm,children:Object(p.jsxs)("form",{className:k.form,children:[Object(p.jsx)("h2",{children:"facebook"}),Object(p.jsx)(d.a,{name:"firstName",className:k.inputField,inputProps:{"data-testid":"firstName-input"},onChange:function(e){a(e.target.value)},placeholder:"First Name",variant:"outlined"}),Object(p.jsx)(d.a,{name:"lastName",className:k.inputField,inputProps:{"data-testid":"lastName-input"},onChange:function(e){b(e.target.value)},placeholder:"Last Name",variant:"outlined"}),Object(p.jsx)(d.a,{type:"email",name:"email",className:k.inputField,inputProps:{"data-testid":"email-input"},onChange:function(e){m(e.target.value)},placeholder:"Email",variant:"outlined",required:!0}),Object(p.jsx)(d.a,{type:"password",name:"password",className:k.inputField,inputProps:{"data-testid":"password-input"},onChange:function(e){w(e.target.value)},placeholder:"Password",variant:"outlined",required:!0}),Object(p.jsx)(u.a,{type:"submit",variant:"contained",color:"primary",onClick:function(e){e.preventDefault();var t={name:{first:n,last:j},email:O,password:C};console.log(JSON.stringify(t)),fetch("v0/users",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){if(!e.ok)throw e})).then((function(){S.push("/login")})).catch((function(e){alert("Error registering, the email may already have been registered.\nPlease try again")}))},children:"Register"}),Object(p.jsx)(h.a,{to:"login",component:v.b,variant:"caption",display:"block",gutterBottom:!0,children:"Already have an account?"})]})})})};var Re=function(){var e=i.a.useState([]),t=Object(l.a)(e,2),n=t[0],a=t[1],c=i.a.useState(""),o=Object(l.a)(c,2),s=o[0],d=o[1],j=i.a.useState(""),b=Object(l.a)(j,2),x=b[0],g=b[1];i.a.useEffect((function(){O()}),[]);var O=function(){var e=localStorage.getItem("user");if(e){var t=JSON.parse(e).accessToken;console.log(JSON.parse(e).id);var n=JSON.parse(e).id,i="/v0/userposts/".concat(n);fetch(i,{headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){if(!e.ok)throw e;return e.json()})).then((function(e){console.log(e.posts),a(e.posts),d(e.firstName),g(e.lastName)})).catch((function(e){}))}};return Object(p.jsxs)("div",{children:[localStorage.getItem("user")?null:Object(p.jsx)(r.a,{to:"login"}),Object(p.jsxs)(w.a,{container:!0,direction:"row",children:[Object(p.jsx)(u.a,{component:v.b,to:"listings",align:"left",variant:"Go home",children:Object(p.jsx)(C.a,{})}),Object(p.jsx)("h2",{align:"center",children:"back to the market"})]}),Object(p.jsxs)(h.a,{children:["Welcome ",s," ",x,"'s profile"]}),Object(p.jsx)(h.a,{children:"Your listings"}),n.length?Object(p.jsx)(Ee,{listings:n}):null]})};var Ue=function(){return Object(p.jsxs)("div",{children:[Object(p.jsx)(r.b,{exact:!0,path:"/",component:Je}),Object(p.jsx)(r.b,{exact:!0,path:"/register",component:We}),Object(p.jsx)(r.b,{exact:!0,path:"/login",component:g}),Object(p.jsx)(r.b,{exact:!0,path:"/listings",component:Je}),Object(p.jsx)(r.b,{exact:!0,path:"/sell",component:k}),Object(p.jsx)(r.b,{exact:!0,path:"/profile",component:Re})]})};o.a.render(Object(p.jsx)(v.a,{children:Object(p.jsx)(Ue,{})}),document.getElementById("root"))}},[[169,1,2]]]);
//# sourceMappingURL=main.da856f4d.chunk.js.map